pico-8 cartridge // http://www.pico-8.com
version 32
__lua__
--Sample player by JWinslow23, edited by Coffeebat
samples={
your_sample=yoursamplehere}

function _init()
	sample=samples.your_sample
	sample.p=0
	playing_sample=true
end

for _,samp in pairs(samples) do
  local str_8bit=""
  for i=0,samp.n-1 do
    local ap=i/8*samp.b
    str_8bit..=chr(((ord(samp.s,ap+1) or 0)<<8|(ord(samp.s,ap+2) or 0))>>32-samp.b-ap%1*8<<24-samp.b)
  end
  samp.s=str_8bit
  samp.p=0
end

function _update()
	if playing_sample then
	  while stat(108)<256 do
	    memset(0x4300,128,256)
	    for i=0,255 do
	      if sample.p<sample.n then
	        sample.p+=1
	        poke(0x4300+i,ord(sample.s,sample.p))
	      else
	        playing_sample=false
	      end
	    end
	    serial(0x808,0x4300,256)
	  end
	end
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
